<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MobileDragon reference manual.: PackDir Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.3 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<b>mdragon</b>::<a class="el" href="classmdragon_1_1_pack_dir.html">PackDir</a></div>
<h1>PackDir Class Reference</h1><!-- doxytag: class=<mdragon::PackDir> -->Packed directory storage system.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;packdir.h&gt;</code>
<p>
<a href="classmdragon_1_1_pack_dir-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a0">PackDir</a> (const Char *name, <a class="el" href="classmdragon_1_1_system.html">System</a> *system)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a1">~PackDir</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a2">FindItem</a> (const Char *name, Bool log_not_found=True)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds specified file by its ASCIIZ name in this packed directory image.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DWord&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a3">GetItemSize</a> (Int item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns file size.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a4">LoadItem</a> (Int item, Byte *buffer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loads file content to buffer.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a5">LoadItem</a> (Int item, <a class="el" href="classmdragon_1_1_resource.html">Resource</a> &amp;resource)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loads file file content to <a class="el" href="classmdragon_1_1_resource.html">Resource</a> object.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a6">LoadFile</a> (const Char *name, <a class="el" href="classmdragon_1_1_resource.html">Resource</a> &amp;resource)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loads file content to <a class="el" href="classmdragon_1_1_resource.html">Resource</a> object.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classmdragon_1_1string.html">string</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmdragon_1_1_pack_dir.html#a7">GetName</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns name for this packed directory image.  <a href="#a7"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Packed directory storage system. 
<p>
Provides methods for finding and retriving data files from packed directory image file.
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0"></a><!-- doxytag: member=<mdragon::PackDir::PackDir> ref=<a0> args=<(const Char *name, System *system)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classmdragon_1_1_pack_dir.html">PackDir</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const Char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classmdragon_1_1_system.html">System</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>system</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. 
<p>
Opens a specified packed directory image file. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>pointer to pack directory image ASCIIZ name. Do not add any extensions to this name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>system</em>&nbsp;</td><td>valid pointer to <a class="el" href="classmdragon_1_1_system.html">System</a> class object.</td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member=<mdragon::PackDir::~PackDir> ref=<a1> args=<()> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">~<a class="el" href="classmdragon_1_1_pack_dir.html">PackDir</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor. 
<p>
Closes pack directory image file and frees memory occupied by file storage system.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a2"></a><!-- doxytag: member=<mdragon::PackDir::FindItem> ref=<a2> args=<(const Char *name, Bool log_not_found=True)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Int FindItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const Char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Bool&nbsp;</td>
          <td class="mdname" nowrap> <em>log_not_found</em> = <code>True</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finds specified file by its ASCIIZ name in this packed directory image. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- pointer to file ASCII name. Use only lowercase string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>log_not_found</em>&nbsp;</td><td>- if True will write message to sytem log if specified file not found. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>index of found specified file. If file not found return -1.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member=<mdragon::PackDir::GetItemSize> ref=<a3> args=<(Int item)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DWord GetItemSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>item</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns file size. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>index of file in pack directory image. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return file size in bytes. See <a class="el" href="classmdragon_1_1_pack_dir.html#a2">FindItem()</a> for getting file index.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a7"></a><!-- doxytag: member=<mdragon::PackDir::GetName> ref=<a7> args=<() const > --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classmdragon_1_1string.html">string</a>&amp; GetName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns name for this packed directory image. 
<p>
<a class="el" href="classmdragon_1_1_pack_dir.html#a7">GetName()</a> returns name for this packed directory image.    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member=<mdragon::PackDir::LoadFile> ref=<a6> args=<(const Char *name, Resource &amp;resource)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Bool LoadFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const Char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classmdragon_1_1_resource.html">Resource</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>resource</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Loads file content to <a class="el" href="classmdragon_1_1_resource.html">Resource</a> object. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- name of file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>resource</em>&nbsp;</td><td>- reference to <a class="el" href="classmdragon_1_1_resource.html">Resource</a> object where the data will be loaded. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return True if file loaded successfully otherwise False.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member=<mdragon::PackDir::LoadItem> ref=<a5> args=<(Int item, Resource &amp;resource)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Bool LoadItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Int&nbsp;</td>
          <td class="mdname" nowrap> <em>item</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classmdragon_1_1_resource.html">Resource</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>resource</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Loads file file content to <a class="el" href="classmdragon_1_1_resource.html">Resource</a> object. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>- index of file in packed directory image. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>resource</em>&nbsp;</td><td>- reference to <a class="el" href="classmdragon_1_1_resource.html">Resource</a> object that will be used to store file content. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if file loaded successfully otherwise False.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member=<mdragon::PackDir::LoadItem> ref=<a4> args=<(Int item, Byte *buffer)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Bool LoadItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Int&nbsp;</td>
          <td class="mdname" nowrap> <em>item</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Byte *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffer</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Loads file content to buffer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>- index of file in this packed directory image. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>- pointer to memory buffer where file data will be loaded. You need allocate enough memory before call this function to store the whole file as it will be loaded at once. See <a class="el" href="classmdragon_1_1_pack_dir.html#a3">GetItemSize()</a> to determine amount of required buffer size. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if file loaded successfully otherwise False.</dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="packdir_8h.html">packdir.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Aug 7 14:45:46 2006 for MobileDragon reference manual. by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.3 </small></address>
</body>
</html>
